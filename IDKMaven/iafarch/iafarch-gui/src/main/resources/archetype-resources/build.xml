
 <project name="ingenias" default="run" basedir="." xmlns:artifact="antlib:org.apache.maven.artifact.ant">
  <import file="maven-build.xml" as="mavenbuild" />
  <property name="specfile" value="src/main/spec/specification.xml"/>
  <taskdef resource="net/sf/antcontrib/antlib.xml" classpathref="build.classpath"/>
  <taskdef resource="org/apache/maven/artifact/ant/antlib.xml" uri="antlib:org.apache.maven.artifact.ant"  
  				classpathref="build.classpath"/>
  

		 <!--   Default targets     -->
	
<!--   Compiles code generated by a JADE Module  and tests it   -->
  <target name="test" >
   <artifact:mvn pom="pom.xml">
    <arg value="test"/>
   </artifact:mvn>
  </target>
  
   <target name="edit">
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="ingenias.editor.IDE">

    <arg line="${specfile}"/>
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
    <!--  Targets to run simulations defined in the system -->
   
  
  
  
  
  <!-- ***********************  -->
  <!-- Node SampleDeployment -->
  <!-- ***********************  -->
  <!--   Runs a MAS created with the jade module and contained in the node SampleDeployment -->
   <target name="runSampleDeploymentProdStandAlone" depends="test">
    <mkdir dir="target/jade"/>
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="ingenias.jade.MainSampleDeploymentProdStandAlone">
    <arg line="60000"/>
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>

  <target name="runSampleDeployment" depends="test">
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="ingenias.jade.MainSampleDeployment">
    <arg line="60000"/> 
    	<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
   <target name="runjadeSampleDeployment">
   <mkdir dir="target/jade"/>
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="jade.Boot">
	<arg line="-gui -port 60000 -mtp 'jade.mtp.http.MessageTransportProtocol(http://127.0.0.1:60001/acc)' -file-dir target/jade/"/>
      	<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
   <target name="runfederatedjadeSampleDeployment">
    <mkdir dir="target/jade"/>
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="jade.Boot">
    <arg line="-gui -port 60000 -mtp 'jade.mtp.http.MessageTransportProtocol(http://127.0.0.1:60001/acc)' -file-dir target/jade subDF:jade.domain.df federator:jade.misc.DFFederatorAgent(resources/DFFederatorAgent.properties)"/>	
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
  <target name="debugSampleDeployment" depends="test">
	  
	  <java fork="true" failonerror="true" maxmemory="256m"
		classname="ingenias.jade.MainSampleDeployment">
		  <jvmarg line="-Xdebug -Xrunjdwp:transport=dt_socket,address=60005,server=y,suspend=n"/>
		 <arg line="60000"/>
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
	  </java>
  </target>
  
  <!-- ***********************  -->
  <!-- Node  -->
  <!-- ***********************  -->
  <!--   Runs a MAS created with the jade module and contained in the node  -->
   <target name="runProdStandAlone" depends="test">
    <mkdir dir="target/jade"/>
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="ingenias.jade.MainProdStandAlone">
    <arg line="60000"/>
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>

  <target name="run" depends="test">
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="ingenias.jade.Main">
    <arg line="60000"/> 
    	<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
   <target name="runjade">
   <mkdir dir="target/jade"/>
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="jade.Boot">
	<arg line="-gui -port 60000 -mtp 'jade.mtp.http.MessageTransportProtocol(http://127.0.0.1:60001/acc)' -file-dir target/jade/"/>
      	<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
   <target name="runfederatedjade">
    <mkdir dir="target/jade"/>
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="jade.Boot">
    <arg line="-gui -port 60000 -mtp 'jade.mtp.http.MessageTransportProtocol(http://127.0.0.1:60001/acc)' -file-dir target/jade subDF:jade.domain.df federator:jade.misc.DFFederatorAgent(resources/DFFederatorAgent.properties)"/>	
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
  <target name="debug" depends="test">
	  
	  <java fork="true" failonerror="true" maxmemory="256m"
		classname="ingenias.jade.Main">
		  <jvmarg line="-Xdebug -Xrunjdwp:transport=dt_socket,address=60005,server=y,suspend=n"/>
		 <arg line="60000"/>
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
	  </java>
  </target>
  
  
  </project>
 