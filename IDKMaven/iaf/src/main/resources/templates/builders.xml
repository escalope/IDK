
@@@program xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../plantilla.xsd"@@@

 @@@saveto@@@
  @@@file overwrite="yes"@@@@@@v@@@jadeproject@@@/v@@@/build.xml@@@/file@@@
  @@@text@@@
 <project name="ingenias" default="run" basedir="." xmlns:artifact="antlib:org.apache.maven.artifact.ant">
  <import file="maven-build.xml" as="mavenbuild" />
  <property name="specfile" value="src/main/spec/specification.xml"/>
  <taskdef resource="net/sf/antcontrib/antlib.xml" classpathref="build.classpath"/>
  <taskdef resource="org/apache/maven/artifact/ant/antlib.xml" uri="antlib:org.apache.maven.artifact.ant"  
  				classpathref="build.classpath"/>
  

		 <!--   Default targets     -->
	
<!--   Compiles code generated by a JADE Module  and tests it   -->
  <target name="test" >
   <artifact:mvn pom="pom.xml">
    <arg value="test"/>
   </artifact:mvn>
  </target>
  
   <target name="edit">
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="ingenias.editor.IDE">

    <arg line="${specfile}"/>
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
    <!--  Targets to run simulations defined in the system -->
   @@@repeat id="simulationnode"@@@
   @@@repeat id="deploynode"@@@
    <!--  Simulation node @@@v@@@simulationconfig@@@/v@@@ -->
    <target name="simulateRepeteadly@@@v@@@simulationconfig@@@/v@@@" depends="test">
     <for param="sim" list="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20">
            <sequential>
    <java fork="true" failonerror="true" maxmemory="@@@v@@@memory@@@/v@@@"
    classname="ingenias.simulation.@@@v@@@simulationconfig@@@/v@@@">
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
     </sequential>
     </for>
  </target>

  <target name="simulate@@@v@@@simulationconfig@@@/v@@@" depends="test">
    <java fork="true" failonerror="true" maxmemory="@@@v@@@memory@@@/v@@@"
    classname="ingenias.simulation.@@@v@@@simulationconfig@@@/v@@@">
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  @@@/repeat@@@
  @@@/repeat@@@
  
  
  
  @@@repeat id="deploynode"@@@
  <!-- ***********************  -->
  <!-- Node @@@v@@@node@@@/v@@@ -->
  <!-- ***********************  -->
  <!--   Runs a MAS created with the jade module and contained in the node @@@v@@@node@@@/v@@@ -->
   <target name="run@@@v@@@node@@@/v@@@ProdStandAlone" depends="test">
    <mkdir dir="target/jade"/>
    <java fork="true" failonerror="true" maxmemory="@@@v@@@memory@@@/v@@@"
    classname="ingenias.jade.Main@@@v@@@node@@@/v@@@ProdStandAlone">
    <arg line="@@@v@@@port@@@/v@@@"/>
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>

  <target name="run@@@v@@@node@@@/v@@@" depends="test">
    <java fork="true" failonerror="true" maxmemory="@@@v@@@memory@@@/v@@@"
    classname="ingenias.jade.Main@@@v@@@node@@@/v@@@">
    <arg line="@@@v@@@port@@@/v@@@"/> 
    	<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>

  <target name="runPause@@@v@@@node@@@/v@@@" depends="test">
    <java fork="true" failonerror="true" maxmemory="@@@v@@@memory@@@/v@@@"
    classname="ingenias.jade.Main@@@v@@@node@@@/v@@@">
    <arg line="@@@v@@@port@@@/v@@@ pause"/> 
    	<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
   <target name="runjade@@@v@@@node@@@/v@@@">
   <mkdir dir="target/jade"/>
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="jade.Boot">
	<arg line="-gui -port @@@v@@@port@@@/v@@@ -mtp 'jade.mtp.http.MessageTransportProtocol(http://127.0.0.1:@@@v@@@fedport@@@/v@@@/acc)' -file-dir target/jade/"/>
      	<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
   <target name="runfederatedjade@@@v@@@node@@@/v@@@">
    <mkdir dir="target/jade"/>
    <java fork="true" failonerror="true" maxmemory="128m"
    classname="jade.Boot">
    <arg line="-gui -port @@@v@@@port@@@/v@@@ -mtp 'jade.mtp.http.MessageTransportProtocol(http://127.0.0.1:@@@v@@@fedport@@@/v@@@/acc)' -file-dir target/jade subDF:jade.domain.df federator:jade.misc.DFFederatorAgent(resources/DFFederatorAgent.properties)"/>	
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
    </java>
  </target>
  
  <target name="debug@@@v@@@node@@@/v@@@" depends="test">
	  
	  <java fork="true" failonerror="true" maxmemory="256m"
		classname="ingenias.jade.Main@@@v@@@node@@@/v@@@">
		  <jvmarg line="-Xdebug -Xrunjdwp:transport=dt_socket,address=60005,server=y,suspend=n"/>
		 <arg line="@@@v@@@port@@@/v@@@"/>
		<classpath>			  
			<path refid="build.classpath" />        
			<pathelement path="${maven.build.outputDir}" />     
		</classpath>
	  </java>
  </target>
  @@@/repeat@@@
  
  </project>
 @@@/text@@@
 @@@/saveto@@@
@@@/program@@@
